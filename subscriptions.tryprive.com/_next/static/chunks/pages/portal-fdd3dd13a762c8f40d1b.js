(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[632],{61517:function(e,t,n){"use strict";var r=n(5152),o=n(52322);t.Z=(0,r.default)((function(){return Promise.resolve(i)}),{ssr:!1});var i=function(e){var t=e.storeUrl,n=e.baseUrl,r=e.accessToken,i=e.entryPoint,s=n+"/auth?storeUrl="+t;return r&&(s=n+"/?access_token=".concat(r,"&storeUrl=").concat(t,"&entryPoint=").concat(i)),(0,o.jsx)("iframe",{frameBorder:"0",style:{width:"100%",height:"100vh"},src:s})}},47934:function(e,t,n){"use strict";var r=n(44925),o=n(33927),i=n(3104),s=n(68434),u=n(52322),a=["loading"];t.Z=function(e){var t=e.loading,n=(0,r.Z)(e,a);return t?(0,u.jsxs)(o.Z,{alignItems:"center",marginTop:"100px",justifyContent:"center",spacing:2,children:[(0,u.jsx)(i.Z,{}),(0,u.jsx)(s.Z,{variant:"body2",children:"Loading subscriptions.."})]}):(0,u.jsx)("div",{children:n.children})}},98771:function(e,t,n){"use strict";var r=n(59713);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(e,t){var n=s.default,r={loading:function(e){e.error,e.isLoading;return e.pastDelay,null}};e instanceof Promise?r.loader=function(){return e}:"function"===typeof e?r.loader=e:"object"===typeof e&&(r=i(i({},r),e));var o=r=i(i({},r),t);if(o.suspense)throw new Error("Invalid suspense option usage in next/dynamic. Read more: https://nextjs.org/docs/messages/invalid-dynamic-suspense");if(o.suspense)return n(o);r.loadableGenerated&&delete(r=i(i({},r),r.loadableGenerated)).loadableGenerated;if("boolean"===typeof r.ssr){if(!r.ssr)return delete r.ssr,a(n,r);delete r.ssr}return n(r)};u(n(2784));var s=u(n(54860));function u(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return delete t.webpack,delete t.modules,e(t)}},91083:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LoadableContext=void 0;var o=((r=n(2784))&&r.__esModule?r:{default:r}).default.createContext(null);t.LoadableContext=o},54860:function(e,t,n){"use strict";var r=n(34575),o=n(93913),i=n(59713);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,d=(l=n(2784))&&l.__esModule?l:{default:l},p=n(36718),f=n(91083);var h=[],v=[],y=!1;function m(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then((function(e){return n.loading=!1,n.loaded=e,e})).catch((function(e){throw n.loading=!1,n.error=e,e})),n}var b=function(){function e(t,n){r(this,e),this._loadFn=t,this._opts=n,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return o(e,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var e=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var t=this._res,n=this._opts;t.loading&&("number"===typeof n.delay&&(0===n.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){e._update({pastDelay:!0})}),n.delay)),"number"===typeof n.timeout&&(this._timeout=setTimeout((function(){e._update({timedOut:!0})}),n.timeout))),this._res.promise.then((function(){e._update({}),e._clearTimeouts()})).catch((function(t){e._update({}),e._clearTimeouts()})),this._update({})}},{key:"_update",value:function(e){this._state=u(u({},this._state),{},{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},e),this._callbacks.forEach((function(e){return e()}))}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return this._state}},{key:"subscribe",value:function(e){var t=this;return this._callbacks.add(e),function(){t._callbacks.delete(e)}}}]),e}();function g(e){return function(e,t){var n=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null,suspense:!1},t);n.suspense&&(n.lazy=d.default.lazy(n.loader));var r=null;function o(){if(!r){var t=new b(e,n);r={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return r.promise()}if(!y&&"function"===typeof n.webpack&&!n.suspense){var i=n.webpack();v.push((function(e){var t,n=a(i);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(-1!==e.indexOf(r))return o()}}catch(s){n.e(s)}finally{n.f()}}))}var s=n.suspense?function(e,t){return d.default.createElement(n.lazy,u(u({},e),{},{ref:t}))}:function(e,t){o();var i=d.default.useContext(f.LoadableContext),s=p.useSubscription(r);return d.default.useImperativeHandle(t,(function(){return{retry:r.retry}}),[]),i&&Array.isArray(n.modules)&&n.modules.forEach((function(e){i(e)})),d.default.useMemo((function(){return s.loading||s.error?d.default.createElement(n.loading,{isLoading:s.loading,pastDelay:s.pastDelay,timedOut:s.timedOut,error:s.error,retry:r.retry}):s.loaded?d.default.createElement(function(e){return e&&e.__esModule?e.default:e}(s.loaded),e):null}),[e,s])};return s.preload=function(){return!n.suspense&&o()},s.displayName="LoadableComponent",d.default.forwardRef(s)}(m,e)}function x(e,t){for(var n=[];e.length;){var r=e.pop();n.push(r(t))}return Promise.all(n).then((function(){if(e.length)return x(e,t)}))}g.preloadAll=function(){return new Promise((function(e,t){x(h).then(e,t)}))},g.preloadReady=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(t){var n=function(){return y=!0,t()};x(v,e).then(n,n)}))},window.__NEXT_PRELOADREADY=g.preloadReady;var j=g;t.default=j},68718:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return S}});var r,o=n(4942),i=n(42982),s=n(15861),u=n(70885),a=n(30168),c=n(87757),l=n.n(c),d=n(33927),p=n(68434),f=n(33994),h=n(11163),v=n(2784),y=n(73501),m=n(26522),b=n(50003),g=n(63134),x=n(12141),j=n(1674),_=n(38947),O=n(52322);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=j.Z.div(r||(r=(0,a.Z)(["\n  background-color: transparent;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),S=!0;t.default=function(e){var t,n,r,o,a=e.inputStoreTheme,c=(0,v.useContext)(g.$j),j=a||c,w=(0,h.useRouter)(),S=v.useRef([]),T=v.useState(!1),Z=(0,u.Z)(T,2),C=Z[0],E=Z[1],A=v.useState(!1),U=(0,u.Z)(A,2),D=U[0],N=U[1],L=v.useState(null),I=(0,u.Z)(L,2),R=I[0],M=I[1],B=(0,v.useContext)(_.Xs),X=B.session,q=B.setSession,F=null===X||void 0===X?void 0:X.logindata,z=F.iv,G=F.content,J=F.type,$=F.input,V=F.storeUrl,W=F.countryCode;function H(e){return Y.apply(this,arguments)}function Y(){return(Y=(0,s.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.prev=1,e.next=4,y.Z.verifyOtp({input:$,type:J,storeUrl:V,countryCode:W,iv:z,content:G,otp:t});case 4:return n=e.sent,window.sessionStorage.setItem("prive_cookies",JSON.stringify({access_token:n.access_token,storeUrl:V,input:$,entryPoint:w.query.entryPoint,expires:n.expires})),e.next=8,q(k(k({},X),{},{access_token:n.access_token,storeUrl:V||(null===X||void 0===X?void 0:X.storeUrl)||w.query.storeUrl||window.location.host}));case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.message==x.sn?M("A newer code than this was sent, please retry."):-1!==e.t0.message.indexOf(x.vP)?M("The code has expired, please retry sending a new one."):M("The code is invalid, please retry."),N(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function K(){return(K=(0,s.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M(null),E(!1),!((t=S.current.map((function(e){return e.value})).join("")).length<6||isNaN(Number(t)))){e.next=6;break}return M("Code must be 6 valid digits"),e.abrupt("return");case 6:return e.next=8,H(t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=(0,s.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),E(!1),M(null),e.prev=3,e.next=6,y.Z.generateOtp({input:$,type:J,storeUrl:V,countryCode:W});case 6:t=e.sent,w.push("/auth/login?redirect=true&iv=".concat(null===t||void 0===t?void 0:t.iv,"&content=").concat(null===t||void 0===t?void 0:t.content,"&input=").concat(encodeURIComponent($),"&type=").concat(J,"&storeUrl=").concat(V,"&countryCode=").concat(W)),N(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),M(e.t0.message),setTimeout((function(){w.push("/auth?storeUrl=".concat(V))}),1e3);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}return v.useEffect((function(){E(Boolean(w.query.redirect))}),[w]),(0,O.jsx)(P,{children:(0,O.jsxs)(d.Z,{sx:{padding:"24px",width:{xs:"100%",sm:"660px"},height:{xs:"100%",sm:"428px"},backgroundColor:j.bgColor||"white",borderRadius:"10px"},gap:{xs:8,sm:0,md:0},justifyContent:{xs:"center",sm:"space-between",md:"space-between"},children:[(0,O.jsxs)("div",{children:[(0,O.jsx)(m.Z,{spacing:{xs:"12px",sm:"16px"},marginBottom:"32px",marginX:"auto",textAlign:{sm:"center"},title:(null===j||void 0===j||null===(t=j.loginCopy)||void 0===t?void 0:t.verifyTitle)||"Check your ".concat("EMAIL"===J?"Email":"mobile phone"),maxWidth:"480px",subtitle:(null===j||void 0===j||null===(n=j.loginCopy)||void 0===n?void 0:n.verifySubTitle)||'We\'ve sent a login code to <b style="color:black;">'.concat($,'</b>. It expires shortly so please enter it soon.<br /><br /> If you did not receive your code, <b style="color:black;">please check spam</b> or junk folders.'),titleStyles:null===j||void 0===j||null===(r=j.loginStyles)||void 0===r?void 0:r.labelTitle,subTitleStyles:null===j||void 0===j||null===(o=j.loginStyles)||void 0===o?void 0:o.labelSubTitle}),(0,O.jsx)(d.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,maxWidth:"320px",margin:"auto",children:(0,i.Z)(Array(7)).map((function(e,t){var n;return 3===t?(0,O.jsx)(p.Z,{sx:{textAlign:"center"},children:"-"},"none"):(0,O.jsx)(f.Z,{sx:{padding:"8.5px 0","& .MuiOutlinedInput-notchedOutline":k({},null===j||void 0===j||null===(n=j.loginStyles)||void 0===n?void 0:n.inputText),"& input.MuiInputBase-input":{padding:"8.5px 0",textAlign:"center"}},onPaste:function(e){return function(e){var t;E(!1),e.preventDefault();var n=null===(t=e.clipboardData.getData("text"))||void 0===t?void 0:t.substring(0,6);if(!isNaN(Number(n))){var r=n.split("");r.forEach((function(e,t){S.current[t].value=e})),r.length===S.current.length?S.current[r.length-1].focus():S.current[r.length].focus()}}(e)},type:"tel",inputRef:function(e){return S.current[t<3?t:t-1]=e},onKeyUp:function(e){return n=e.keyCode,r=t<3?t:t-1,8===n&&r>0&&S.current[r-1].focus(),void(n<48||n>57||5!==r&&S.current[r+1].focus());var n,r},onFocus:function(){return function(e){S.current[e].select()}(t<3?t:t-1)},size:"small",inputProps:{maxLength:1,pattern:"[0-9]",style:{backgroundColor:"rgba(245, 247, 251, 0.3)"}}},t<3?t:t-1)}))}),(0,O.jsxs)(d.Z,{spacing:1,my:2,paddingX:{sm:8},children:[R&&(0,O.jsx)(p.Z,{color:j.errorTextColor||"error",children:R}),C&&(0,O.jsx)(p.Z,{color:"green",children:"Code re-sent."})]})]}),(0,O.jsx)(b.Z,{isLoading:D,onAction:function(){return K.apply(this,arguments)},onLinkAction:function(){return Q.apply(this,arguments)},primaryText:"LOGIN",linkText:"Retry",storeUrl:V})]})})}},12562:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return Z}});var r,o=n(42982),i=n(15861),s=n(30168),u=n(87757),a=n.n(u),c=n(2784),l=n(99423),d=n(33927),p=n(3104),f=n(68434),h=n(5732),v=n(38947),y=n(10005),m=n(92642),b=n(36221),g=n(97605),x=n(9016),j=n(79332),_=n(92640),O=n(45244),w=n(2734),k=n(28827),P=n(52322),S=function(){return(0,P.jsxs)(d.Z,{alignItems:"center",marginTop:"100px",justifyContent:"center",spacing:2,children:[(0,P.jsx)(p.Z,{}),(0,P.jsx)(f.Z,{variant:"body2",children:"Loading subscriptions.."})]})},T=(0,l.Z)("section")(r||(r=(0,s.Z)(["\n  border-radius: 8px;\n  background: #fff;\n  margin-bottom: 20px;\n  padding: 0 0 0 5px;\n"]))),Z=!0;t.default=function(e){e.hideLogout;var t,n=e.storeTheme,r=e.template,s=(0,c.useContext)(v.Xs).session,u=(0,b.F)({access_token:null===s||void 0===s?void 0:s.access_token}),l=(0,c.useContext)(y.oQ).state.pendingGifts,d=(0,c.useState)([]),p=d[0],Z=d[1],C=(0,c.useState)(!0),E=C[0],A=C[1],U=(0,c.useState)(null),D=U[0],N=U[1],L=(0,c.useState)(),I=L[0],R=L[1],M=(0,c.useState)(!0),B=M[0],X=M[1],q=(0,c.useState)(),F=q[0],z=q[1],G=(0,c.useState)(!0),J=G[0],$=G[1],V=function(){var e=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u("/subscriptionContracts?_orderby=createdAt&_orderbydirection=ASC");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("/membership/shopper");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c.useEffect((function(){E&&s&&(X(!0),V().then((function(e){var t,n=e.data;Z(null===(t=n[0])||void 0===t?void 0:t.filter((function(e){return!e.isMembership}))),R(null)})).catch((function(e){R(e.message||"An error occurred"),m.Tb(e)})).finally((function(){X(!1),A(!1)})))}),[E,s]),c.useEffect((function(){s&&($(!0),W().then((function(e){var t=e.data;N(t),z(null)})).catch((function(e){z(e.message||"An error occurred"),m.Tb(e)})).finally((function(){$(!1)})))}),[s]),c.useEffect((function(){s&&h.ZP.track.apply(h.ZP,(0,o.Z)((0,h.hS)((null===s||void 0===s?void 0:s.email)||"")))}),[s]);return!0,(0,P.jsx)(j.Z,{title:"My Account",hideLogout:true,children:l.length>0?(0,P.jsx)(_.S,{setRefreshContracts:A}):I||F?(0,P.jsxs)(f.Z,{variant:"h5",color:"error",marginTop:4,children:["Oops.. ",I||F]}):(0,P.jsxs)(P.Fragment,{children:[n&&(n.portalBannerTitleCopy||n.portalBannerSubTitleCopy)?(0,P.jsx)(T,{children:(0,P.jsx)(x.Z,{padding:"8px",flex:"6",title:n.portalBannerTitleCopy||void 0,children:n.portalBannerSubTitleCopy&&(0,P.jsx)(f.Z,{variant:"body1",color:n.buttonTextColor||"#000",children:n.portalBannerSubTitleCopy})})}):null,B||J?(0,P.jsx)(S,{}):(0,P.jsx)(w.J,{axios:u,children:(0,P.jsx)(O.x,{contracts:p,updateContract:function(e){var t=p.map((function(t){return t.id===e.id?e:t}));Z(t)},children:(0,P.jsx)(k.$,{membership:D,children:(0,g.S)(null!==(t=null===r||void 0===r?void 0:r.templateType)&&void 0!==t?t:null)})})})]})})}},8853:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return k}});var r=n(4942),o=n(42982),i=n(15861),s=n(87757),u=n.n(s),a=n(73501),c=n(2784),l=n(11752),d=n(11163),p=n(12562),f=n(92642),h=n(38947),v=n(47934),y=n(61517),m=n(5732),b=n(89644),g=n.n(b),x=n(50930),j=n(68718),_=n(52322);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=!0;t.default=function(e){var t=e.shopUrl,n=e.serverProvidedCustomerEmail,r=e.pageProps,s=e.shopperPortalTheme,b=e.loginTheme,O=e.template,k=e.serverProvidedEndpoint,P=(0,l.default)().publicRuntimeConfig,S=(0,c.useContext)(h.Xs),T=S.session,Z=S.setSession,C=(0,c.useState)(!0),E=C[0],A=C[1],U=(0,d.useRouter)(),D=(0,c.createRef)(),N=(0,c.createRef)(),L=(0,c.createRef)(),I=(0,c.useState)(null),R=I[0],M=I[1],B=U.query,X=B.storeUrl,q=B.customerEmail,F=U.query.shop2appToken,z=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g().post("".concat(P.apiUrl,"/shoppers/trackers"),JSON.stringify({storeUrl:X,input:q,type:"EMAIL"}),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){var t=e.data,n={name:q,$email:q,prive_id:t.id};m.ZP.register({login_type:"PROXY",store_url:X,store_id:t.merchantId}),m.ZP.identify(q),m.ZP.people.set(n),m.ZP.track.apply(m.ZP,(0,o.Z)((0,m.cJ)()))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){var e=document.querySelector("#__NEXT_DATA__"),n=null===e||void 0===e?void 0:e.innerHTML;if(n&&!JSON.parse(n).props.pageProps.serverProvidedCustomerEmail&&!F)return window.sessionStorage.getItem("prive_cookies")?(A(!1),void M(null)):void(R?null!==T&&void 0!==T&&T.logindata&&(M((0,_.jsx)(j.default,{inputStoreTheme:b})),A(!1)):(M((0,_.jsx)(x.default,{storeTheme:b,inputStoreUrl:t||X})),A(!1)));if("moment-drink-your-meditation.myshopify.com"==(t||X)||"drinkmoment.com"==location.host)return console.log("drink moment hosting:"),M((0,_.jsx)(y.Z,{baseUrl:k,storeUrl:t||X})),void A(!1);if(R)A(!1);else if(D.current&&F){var o;X=(null===(o=D.current)||void 0===o?void 0:o.innerText).trim(),a.Z.getAccessTokenForShop2App({shop2appToken:F,storeUrl:X}).then((function(e){if(Z({access_token:e,storeUrl:X,isOneClickLogin:!0}),e){var n=w(w({},r),{},{storeTheme:s,template:O});z(e),M((0,_.jsx)(p.default,w(w({},n),{},{hideLogout:!0,template:O,storeUrl:t||X})))}else M((0,_.jsx)("h2",{style:{textAlign:"center"},children:"No subscriptions found."}));A(!1)}))}else if(D.current&&N.current){var i,u;X=(null===(i=D.current)||void 0===i?void 0:i.innerText).trim(),q=null===(u=N.current)||void 0===u?void 0:u.innerText,f.av({email:String(q)}),a.Z.getAccessTokenIfAvailable({customerEmail:q,storeUrl:X}).then((function(e){if(Z({access_token:e,storeUrl:X,isOneClickLogin:!0}),e){var n=w(w({},r),{},{storeTheme:s,template:O});z(e),M((0,_.jsx)(p.default,w(w({},n),{},{hideLogout:!0,template:O,storeUrl:t||X})))}else M((0,_.jsx)("h2",{style:{textAlign:"center"},children:"No subscriptions found."}));A(!1)}))}}),[T,U.asPath]),(0,_.jsxs)("div",{children:[(0,_.jsxs)("p",{ref:D,hidden:!0,children:[t," "]}),(0,_.jsx)("p",{ref:N,hidden:!0,children:n}),(0,_.jsx)("p",{id:"tokenRef",ref:L,hidden:!0,children:null===T||void 0===T?void 0:T.access_token}),(0,_.jsx)(v.Z,{loading:E,children:R})]})}},77121:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/portal",function(){return n(8853)}])},5152:function(e,t,n){e.exports=n(98771)}},function(e){e.O(0,[774,915,182,602,70,12,833,642,727,567,782,930,888,179],(function(){return t=77121,e(e.s=t);var t}));var t=e.O();_N_E=t}]);